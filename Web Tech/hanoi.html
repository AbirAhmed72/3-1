<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .lbl{
            border: 1px red solid;
            width: 30%;
            margin: 0% 1% 0% 1%;
            float: left;
            text-align: center;
            background-color: cadetblue;
            font-size: large;
            font-weight: bolder;
            color: wheat;
        }
        .top3{
            border: 5px blue solid;
            width: 30%;
            margin: 1%;
            float: left;
            height: 20rem;
            box-sizing: border-box;
            /* margin-right: 5px; */
            display: flex;
            flex-direction: column-reverse;
            /* align-items: flex-end; */
        }
        .upper{
            width: 80%;
            height: 4rem;
            margin: 15px;
            margin-left: 35px;
            background-color: wheat;
            font-size: large;
            font-weight: bolder;
            color: blue;
            border-radius: 50%;
        }

        .bottom{
            clear: both;
            /* border: 1px blue solid; */
            height: 7rem;
            width: 100%;
            box-sizing: border-box;
        }
        .lower{
            width: 32%;
            height: 3.5rem;
            box-sizing: border-box;
            padding: 0px;
            margin-right: 0px;
            background-color: cadetblue;
            font-size: large;
            font-weight: bolder;
        }

        .lower:hover{
            background-color: aqua;
            transition: 200ms ease-in-out;
        }

        .menu{
            width: 45%;
            margin: 1% 2% 1% 2%;
            background-color: greenyellow;
            font-size: large;
            font-weight: bolder;

        }
        .menu:hover{
            background-color: green;
            transition: 200ms ease-in-out;
        }

        body{
            background-image: url(./hanoi.jpg);
            background-size: cover;
            background-position: center;
        }
    </style>
</head>
<body>

    <h1 style="text-align: center;">Welcome to Tower of Abir er khela!</h1>

    
    <div class="lbl">1</div>
    <div class="lbl">2</div>
    <div class="lbl">3</div>
    
    <div class="top3" id="div1">
        
    
        <button type="button" id="two" class="upper">2</button>
        <button type="button" id="four" class="upper">4</button>
        <button type="button" id="three" class="upper">3</button>
        <button type="button" id="one" class="upper">1</button>
            
    </div>
    <div class="top3" id="div2">

    </div>
    <div class="top3" id="div3">

    </div>

    <div class="bottom">
        <button class="lower" onclick="playGame(0, 1)">1 -> 2</button>
        <button class="lower" onclick="playGame(1, 2)">2 -> 3</button>
        <button class="lower" onclick="playGame(2, 0)">3 -> 1</button>
        <button class="lower" onclick="playGame(1, 0)">2 -> 1</button>
        <button class="lower" onclick="playGame(2, 1)">3 -> 2</button>
        <button class="lower" onclick="playGame(0, 2)">1 -> 3</button>
        <!-- <button class="lower" onclick="resetGame()">Reset Game</button>
        <button class="lower" onclick="checkGame()">Check Result</button> -->
    </div>

    <div class="bottom">
        <button class="menu" onclick="resetGame()">Reset Game</button>
        <button class="menu" onclick="checkGame()">Check Result</button>
    </div>
    
    <script>
        let divs = document.getElementsByClassName('top3');

        function playGame(divIndex1, divIndex2){
            document.getElementsByTagName('h1')[0].innerHTML
                                                 = "Game is being played 🎮";

            let btn = divs[divIndex1].lastElementChild;
            let btn2 = divs[divIndex2].lastElementChild;
            console.log(btn.innerText);

            if(divs[divIndex2].childElementCount == 0 || btn.innerText < btn2.innerText){
                divs[divIndex1].removeChild(btn);
                divs[divIndex2].append(btn);
            }
            
        }

        function shuffle(array) {
            while(array[0] === 1 && array[1] === 2 && array[2] === 3 && array[3] === 4){
               for (let i = array.length - 1; i > 0; i--) {
                    let j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }
            return array; 
        }

        let ansNumbers = [1, 2, 3, 4];

        function resetGame(){
            document.getElementsByTagName('h1')[0].innerHTML
                                                 = "Game is reset ⏪";
            let shuffledNumbers = [1, 2, 3, 4];
            shuffledNumbers = shuffle(shuffledNumbers);

            while(divs[1].childElementCount > 0){
                let btnOfDiv2 = divs[1].lastElementChild;
                divs[1].removeChild(btnOfDiv2);
                divs[0].append(btnOfDiv2);
            }

            while(divs[2].childElementCount > 0){
                let btnOfDiv3 = divs[2].lastElementChild;
                divs[2].removeChild(btnOfDiv3);
                divs[0].append(btnOfDiv3);
            }
        
            bricks = document.getElementsByClassName('upper');
           
            bricks[0].innerHTML = shuffledNumbers[0];
            bricks[1].innerHTML = shuffledNumbers[1];
            bricks[2].innerHTML = shuffledNumbers[2];
            bricks[3].innerHTML = shuffledNumbers[3];            
        }

        function checkGame(){
            for(let i=0; i<divs.length; i++){
                if(divs[i].childElementCount === 4){
                    // console.log("hoise");
                    let ansBtns = divs[i].children;
                    let userAns = [ ];
                    // console.log(ansBtns[0]);
                    for(let i=0; i<ansBtns.length; i++){
                        userAns.push(parseInt(ansBtns[i].innerText));
                    }

                    let areEqual = userAns.reverse().every((element, index) => element
                                                         === ansNumbers[index]);

                    if(areEqual){
                        document.getElementsByTagName('h1')[0].innerHTML
                                                 = "You won! You're clearly the KING 👑";
                        break;
                    }
                    else{
                        document.getElementsByTagName('h1')[0].innerHTML
                                                 = "You've failed miserably 👎";
                        break;
                    }
                    
                }
                else{
                    document.getElementsByTagName('h1')[0].innerHTML
                                                 = "That's not how the game works 😒";
                }
            }
        }
    </script>
</body>
</html>