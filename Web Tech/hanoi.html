<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .top3{
            border: 1px red solid;
            width: 32%;
            float: left;
            height: 20rem;
            box-sizing: border-box;
            display: flex;
            flex-direction: column-reverse;
            align-items: flex-end;
        }
        .upper{
            width: 100%;
            height: 5rem;
        }            
        .bottom{
            clear: both;
            border: 1px blue solid;
            height: 10rem;
            box-sizing: border-box;
        }
        .lower{
            width: 32%;
            height: 5rem;
            box-sizing: border-box;
        }
    </style>
</head>
<body>

    <h1 style="text-align: center;">Welcome to Tower of Abir er khela!</h1>
    <div class="top3" id="div1">
        
    
        <button type="button" id="two" class="upper">2</button>
        <button type="button" id="four" class="upper">4</button>
        <button type="button" id="three" class="upper">3</button>
        <button type="button" id="one" class="upper">1</button>
            
    </div>
    <div class="top3" id="div2">

    </div>
    <div class="top3" id="div3">

    </div>

    <div class="bottom">
        <!-- <button class="lower" onclick="onetwo()">1 -> 2</button>
        <button class="lower" onclick="twothree()">2 -> 3</button>
        <button class="lower" onclick="threeone()">3 -> 1</button>
        <button class="lower" onclick="twoone()">2 -> 1</button>
        <button class="lower" onclick="threetwo()">3 -> 2</button>
        <button class="lower" onclick="onethree()">1 -> 3</button>
        <button class="lower" onclick="resetGame()">Reset Game</button>
        <button class="lower" onclick="checkGame()">Check Result</button> -->

        <button class="lower" onclick="playGame(0, 1)">1 -> 2</button>
        <button class="lower" onclick="playGame(1, 2)">2 -> 3</button>
        <button class="lower" onclick="playGame(2, 0)">3 -> 1</button>
        <button class="lower" onclick="playGame(1, 0)">2 -> 1</button>
        <button class="lower" onclick="playGame(2, 1)">3 -> 2</button>
        <button class="lower" onclick="playGame(0, 2)">1 -> 3</button>
        <button class="lower" onclick="resetGame()">Reset Game</button>
        <button class="lower" onclick="checkGame()">Check Result</button>
    </div>
    
    <script>
        let divs = document.getElementsByClassName('top3');

        function playGame(divIndex1, divIndex2){
            document.getElementsByTagName('h1')[0].innerHTML
                                                 = "Game is being played 🎮";
            let btn = divs[divIndex1].lastElementChild;
            divs[divIndex1].removeChild(btn);
            divs[divIndex2].append(btn);
        }

        function onetwo(){
            document.getElementsByTagName('h1')[0].innerHTML
                                                 = "Game is being played 🎮";
            let btn = divs[0].lastElementChild;
            divs[0].removeChild(btn);
            divs[1].append(btn);
        }
        function twothree(){
            document.getElementsByTagName('h1')[0].innerHTML
                                                 = "Game is being played 🎮";
            let btn = divs[1].lastElementChild;
            divs[1].removeChild(btn);
            divs[2].append(btn);
        }
        function threeone(){
            document.getElementsByTagName('h1')[0].innerHTML
                                                 = "Game is being played 🎮";
            let btn = divs[2].lastElementChild;
            divs[2].removeChild(btn);
            divs[0].append(btn);
        }
        function threetwo(){
            document.getElementsByTagName('h1')[0].innerHTML
                                                 = "Game is being played 🎮";
            let btn = divs[2].lastElementChild;
            divs[2].removeChild(btn);
            divs[1].append(btn);
        }
        function twoone(){
            document.getElementsByTagName('h1')[0].innerHTML
                                                 = "Game is being played 🎮";
            let btn = divs[1].lastElementChild;
            divs[1].removeChild(btn);
            divs[0].append(btn);
        }
        function onethree(){
            document.getElementsByTagName('h1')[0].innerHTML
                                                 = "Game is being played 🎮";
            let btn = divs[0].lastElementChild;
            divs[0].removeChild(btn);
            divs[2].append(btn);
        }

        function shuffle(array) {
            while(array[0] === 1 && array[1] === 2 && array[2] === 3 && array[3] === 4){
               for (let i = array.length - 1; i > 0; i--) {
                    let j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }
            return array; 
        }

        let ansNumbers = [1, 2, 3, 4];

        function resetGame(){
            document.getElementsByTagName('h1')[0].innerHTML
                                                 = "Game is reset ⏪";
            let shuffledNumbers = [1, 2, 3, 4];
            shuffledNumbers = shuffle(shuffledNumbers);

            while(divs[1].childElementCount > 0){
                let btnOfDiv2 = divs[1].lastElementChild;
                divs[1].removeChild(btnOfDiv2);
                divs[0].append(btnOfDiv2);
            }

            while(divs[2].childElementCount > 0){
                let btnOfDiv3 = divs[2].lastElementChild;
                divs[2].removeChild(btnOfDiv3);
                divs[0].append(btnOfDiv3);
            }
        
            bricks = document.getElementsByClassName('upper');
           
            bricks[0].innerHTML = shuffledNumbers[0];
            bricks[1].innerHTML = shuffledNumbers[1];
            bricks[2].innerHTML = shuffledNumbers[2];
            bricks[3].innerHTML = shuffledNumbers[3];            
        }

        function checkGame(){
            for(let i=0; i<divs.length; i++){
                if(divs[i].childElementCount === 4){
                    // console.log("hoise");
                    let ansBtns = divs[i].children;
                    let userAns = [ ];
                    // console.log(ansBtns[0]);
                    for(let i=0; i<ansBtns.length; i++){
                        userAns.push(parseInt(ansBtns[i].innerText));
                    }

                    let areEqual = userAns.reverse().every((element, index) => element
                                                         === ansNumbers[index]);

                    if(areEqual){
                        document.getElementsByTagName('h1')[0].innerHTML
                                                 = "You won! You're clearly the KING 👑";
                        break;
                    }
                    else{
                        document.getElementsByTagName('h1')[0].innerHTML
                                                 = "You've failed miserably 👎";
                        break;
                    }
                    
                }
                else{
                    document.getElementsByTagName('h1')[0].innerHTML
                                                 = "That's not how the game works 😒";
                }
            }
        }
    </script>
</body>
</html>